<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.jahia.modules</groupId>
        <artifactId>jahia-modules</artifactId>
        <version>6.7.0.0-SNAPSHOT</version>
    </parent>
    <artifactId>database-connector</artifactId>
    <version>2.0-SNAPSHOT</version>
    <packaging>bundle</packaging>
    <name>Jahia Database Connector</name>
    <description>Integration of Spring Data (http://projects.spring.io/spring-data/)</description>
    <scm>
        <connection>scm:git@github.com:Jahia/database-connector.git</connection>
        <developerConnection>scm:git@github.com:Jahia/database-connector.git</developerConnection>
        <url>scm:git@github.com:Jahia/database-connector.git</url>
    </scm>
    <properties>
        <jedis.version>2.1.0</jedis.version>
        <spring-data-redis.version>1.1.0.RELEASE</spring-data-redis.version>
        <spring-data-mongodb.version>1.3.2.RELEASE</spring-data-mongodb.version>
        <spring-data-neo4j.version>2.3.2.RELEASE</spring-data-neo4j.version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-neo4j</artifactId>
            <version>${spring-data-neo4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-neo4j-rest</artifactId>
            <version>${spring-data-neo4j.version}</version>
        </dependency>
        <dependency>
            <groupId>commons-configuration</groupId>
            <artifactId>commons-configuration</artifactId>
            <version>1.9</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.13</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-bundle</artifactId>
            <version>1.17.1</version>
        </dependency>
        <dependency>
            <groupId>javax.ws.rs</groupId>
            <artifactId>jsr311-api</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>com.googlecode.concurrentlinkedhashmap</groupId>
            <artifactId>concurrentlinkedhashmap-lru</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>org.parboiled</groupId>
            <artifactId>parboiled-java</artifactId>
            <version>1.1.6</version>
        </dependency>
        <dependency>
            <groupId>org.scala-lang</groupId>
            <artifactId>scala-library</artifactId>
            <version>2.10.3</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-redis</artifactId>
            <version>${spring-data-redis.version}</version>
        </dependency>
        <dependency>
            <groupId>redis.clients</groupId>
            <artifactId>jedis</artifactId>
            <version>${jedis.version}</version>
        </dependency>
        <dependency>
            <groupId>commons-pool</groupId>
            <artifactId>commons-pool</artifactId>
            <version>1.6</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-mongodb</artifactId>
            <version>${spring-data-mongodb.version}</version>
        </dependency>
        <dependency>
            <groupId>org.mongodb</groupId>
            <artifactId>mongo-java-driver</artifactId>
            <version>2.11.3</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-webflow</artifactId>
            <version>${springwebflow-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.gemini.blueprint</groupId>
            <artifactId>gemini-blueprint-core</artifactId>
            <version>${gemini.blueprint.version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${slf4j.version}</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
    <repositories>
        <repository>
            <releases>
                <enabled>true</enabled>
                <updatePolicy>never</updatePolicy>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
            <id>jahia-public</id>
            <name>Jahia Public Repository</name>
            <url>https://devtools.jahia.com/nexus/content/groups/public</url>
        </repository>
    </repositories>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Jahia-Module-Type>system</Jahia-Module-Type>
                        <Jahia-Deploy-On-Site>all</Jahia-Deploy-On-Site>
                        <Jahia-Depends>default,siteSettings,serverSettings</Jahia-Depends>
                        <Import-Package>ch.qos.logback.classic;resolution:=optional,
                            ch.qos.logback.classic.joran;resolution:=optional,
                            ch.qos.logback.classic.pattern;resolution:=optional,
                            ch.qos.logback.classic.spi;resolution:=optional,
                            ch.qos.logback.core;resolution:=optional,
                            ch.qos.logback.core.filter;resolution:=optional,
                            ch.qos.logback.core.joran.spi;resolution:=optional,
                            ch.qos.logback.core.spi;resolution:=optional,
                            com.lambdaworks.redis;resolution:=optional,
                            com.lambdaworks.redis.codec;resolution:=optional,
                            com.lambdaworks.redis.output;resolution:=optional,
                            com.lambdaworks.redis.protocol;resolution:=optional,
                            com.lambdaworks.redis.pubsub;resolution:=optional,
                            com.mysema.query;resolution:=optional,
                            com.mysema.query.annotations;resolution:=optional,
                            com.mysema.query.apt;resolution:=optional,
                            com.mysema.query.lucene;resolution:=optional,
                            com.mysema.query.mongodb;resolution:=optional,
                            com.mysema.query.types;resolution:=optional,
                            com.mysema.query.types.path;resolution:=optional,
                            com.tinkerpop.blueprints.pgm;resolution:=optional,
                            com.tinkerpop.blueprints.pgm.impls.neo4j;resolution:=optional,
                            com.tinkerpop.pipes.util.structures;resolution:=optional,
                            com.sun.jersey.api.client;resolution:=optional,
                            com.sun.jersey.api.client.filter;resolution:=optional,
                            com.sun.grizzly.http;resolution:=optional,
                            com.sun.grizzly.http.servlet;resolution:=optional,
                            com.sun.grizzly.standalone;resolution:=optional,
                            com.sun.grizzly.tcp.http11;resolution:=optional,
                            com.sun.grizzly.util.buf;resolution:=optional,
                            com.sun.codemodel;resolution:=optional,
                            com.sun.source.tree;resolution:=optional,
                            com.sun.source.util;resolution:=optional,
                            com.sun.tools.javac.model;resolution:=optional,
                            com.sun.tools.javac.processing;resolution:=optional,
                            com.sun.tools.javac.tree;resolution:=optional,
                            com.sun.tools.javac.util;resolution:=optional,
                            com.sun.tools.xjc;resolution:=optional,
                            com.sun.xml.bind.v2.model.core;resolution:=optional,
                            com.sun.xml.bind.v2.model.runtime;resolution:=optional,
                            com.sun.xml.bind.v2.runtime;resolution:=optional,
                            com.sun.xml.bind.v2.runtime.property;resolution:=optional,
                            com.sun.xml.bind.v2.runtime.unmarshaller;resolution:=optional,
                            com.sun.xml.fastinfoset.stax;resolution:=optional,
                            com.sun.xml.fastinfoset.sax;resolution:=optional,
                            com.sun.org.apache.xml.internal.resolver;resolution:=optional,
                            com.sun.org.apache.xml.internal.resolver.tools;resolution:=optional,
                            redis;resolution:=optional,
                            redis.client;resolution:=optional,
                            redis.reply;resolution:=optional,
                            org.apache.commons.jexl2;resolution:=optional,
                            org.apache.xml.resolver;resolution:=optional,
                            org.apache.xml.resolver.helpers;resolution:=optional,
                            org.apache.xml.resolver.readers;resolution:=optional,
                            org.apache.xml.resolver.tools;resolution:=optional,
                            org.bson;resolution:=optional,
                            org.bson.types;resolution:=optional,
                            org.codehaus.jackson.xc;resolution:=optional,
                            org.codehaus.jettison.badgerfish;resolution:=optional,
                            org.codehaus.jettison.json;resolution:=optional,
                            org.codehaus.jettison.mapped;resolution:=optional,
                            org.eclipse.persistence.descriptors;resolution:=optional,
                            org.eclipse.persistence.internal.descriptors;resolution:=optional,
                            org.eclipse.persistence.internal.oxm;resolution:=optional,
                            org.eclipse.persistence.internal.queries;resolution:=optional,
                            org.eclipse.persistence.jaxb;resolution:=optional,
                            org.eclipse.persistence.mappings;resolution:=optional,
                            org.eclipse.persistence.mappings.converters;resolution:=optional,
                            org.eclipse.persistence.mappings.foundation;resolution:=optional,
                            org.eclipse.persistence.oxm;resolution:=optional,
                            org.eclipse.persistence.oxm.mappings;resolution:=optional,
                            org.eclipse.persistence.sessions;resolution:=optional,
                            org.jboss.netty.channel;resolution:=optional,
                            org.jredis;resolution:=optional,
                            org.jredis.connector;resolution:=optional,
                            org.jredis.protocol;resolution:=optional,
                            org.jredis.ri.alphazero;resolution:=optional,
                            org.jredis.ri.alphazero.connection;resolution:=optional,
                            org.springframework.beans.factory.aspectj;resolution:=optional,
                            org.springframework.hateoas;resolution:=optional,
                            org.springframework.hateoas.mvc;resolution:=optional,
                            org.springframework.oxm;resolution:=optional,
                            sun.misc;resolution:=optional,
                            sun.reflect;resolution:=optional,

                            org.springframework.cglib.core,
                            org.springframework.cglib.proxy,
                            org.springframework.web.servlet.tags,
                            org.springframework.web.servlet.tags.form,

                            ${jahia.plugin.projectPackageImport},
                            *</Import-Package>
                        <Export-Package>{local-packages},
                            org.neo4j.graphdb,
                            org.neo4j.graphdb.traversal,
                            org.springframework.data.annotation,
                            org.springframework.data.domain,
                            org.springframework.data.neo4j.annotation,
                            org.springframework.data.neo4j.conversion,
                            org.springframework.data.neo4j.config,
                            org.springframework.data.neo4j.core,
                            org.springframework.data.neo4j.fieldaccess,
                            org.springframework.data.neo4j.mapping,
                            org.springframework.data.neo4j.repository,
                            org.springframework.data.neo4j.repository.query,
                            org.springframework.data.neo4j.rest,
                            org.springframework.data.neo4j.support,
                            org.springframework.data.mongodb,
                            org.springframework.data.mongodb.core,
                            org.springframework.data.mongodb.core.aggregation,
                            org.springframework.data.mongodb.core.convert,
                            org.springframework.data.mongodb.core.geo,
                            org.springframework.data.mongodb.core.index,
                            org.springframework.data.mongodb.core.mapping,
                            org.springframework.data.mongodb.core.mapreduce,
                            org.springframework.data.mongodb.core.query,
                            org.springframework.data.mongodb.repository,
                            org.springframework.data.mongodb.repository.config,
                            org.springframework.data.mongodb.repository.query,
                            org.springframework.data.mongodb.repository.support,
                            org.springframework.data.redis.connection,
                            org.springframework.data.redis.connection.convert,
                            org.springframework.data.redis.connection.jedis,
                            org.springframework.data.redis.connection.jredis,
                            org.springframework.data.redis.connection.lettuce,
                            org.springframework.data.redis.connection.srp,
                            org.springframework.data.redis.connection.util,
                            org.springframework.data.redis.core,
                            org.springframework.data.redis.core.query,
                            org.springframework.data.redis.core.script,
                            org.springframework.data.redis.hash,
                            org.springframework.data.redis.listener,
                            org.springframework.data.redis.listener.adapter,
                            org.springframework.data.redis.serializer,
                            org.springframework.data.redis.support,
                            org.springframework.data.redis.support.atomic,
                            org.springframework.data.redis.support.collections,
                            org.springframework.data.repository,
                            org.springframework.data.repository.config,
                            org.springframework.data.repository.core.support</Export-Package>
                        <Embed-Dependency>*;groupId=org.neo4j|javax.ws.rs|com.sun.jersey|com.googlecode.concurrentlinkedhashmap|
                            org.ow2.easybeans.osgi|com.sun.xml.bind|org.parboiled|org.scala-lang|commons-configuration|
                            commons-pool|org.codehaus.jackson|redis.clients|org.mongodb;scope=compile; type=!pom; inline=false,
                            *;artifactId=spring-aspects;scope=compile; type=!pom; inline=false,
                            *;groupId=org.springframework.data;scope=compile; type=!pom; inline=!META-INF/**</Embed-Dependency>
                    </instructions>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-shade-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <phase>install</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                        <configuration>
                            <promoteTransitiveDependencies>false</promoteTransitiveDependencies>
                            <createDependencyReducedPom>false</createDependencyReducedPom>
                            <artifactSet>
                                <includes>
                                    <include>org.springframework:*</include>
                                    <include>org.jahia.modules:*</include>
                                    <include>org.springframework.webflow:*</include>
                                    <include>org.springframework.data:*</include>
                                </includes>
                            </artifactSet>
                            <filters>
                                <filter>
                                    <artifact>org.springframework:*</artifact>
                                    <includes>
                                        <include>META-INF/spring.handlers</include>
                                        <include>META-INF/spring.schemas</include>
                                    </includes>
                                </filter>
                                <filter>
                                    <artifact>org.springframework.webflow:*</artifact>
                                    <includes>
                                        <include>META-INF/spring.handlers</include>
                                        <include>META-INF/spring.schemas</include>
                                    </includes>
                                </filter>
                            </filters>
                            <transformers>
                                <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                                    <resource>META-INF/spring.handlers</resource>
                                </transformer>
                                <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                                    <resource>META-INF/spring.schemas</resource>
                                </transformer>
                            </transformers>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project>
